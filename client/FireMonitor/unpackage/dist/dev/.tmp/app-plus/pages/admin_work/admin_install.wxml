<view><cu-custom vue-id="1" bgColor="bg-gradual-dark-purple" isBack="{{true}}" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content">添加设备</view></cu-custom><view class="cu-card"><view class="cu-item"><view data-event-opts="{{[['tap',[['openScan',['$event']]]]]}}" class="flex justify-center margin-top margin-bottom-xs" bindtap="__e"><image class="flex justify-center margin-top margin-bottom-sm" style="width:200rpx;height:200rpx;" src="../../static/home/qrcodescan.png"></image></view><view class="flex justify-center text-gray">扫一扫获取设备基本信息</view><form><view class="cu-form-group margin-top"><view class="title">设备编码</view><input placeholder="{{device_sn===''?ph_device_sn:device_sn}}" disabled="{{shouldDisableInputSn}}" name="input" data-event-opts="{{[['blur',[['onEnterDeviceSn',['$event']]]],['input',[['__set_model',['','device_sn','$event',[]]]]]]}}" value="{{device_sn}}" bindblur="__e" bindinput="__e"/></view><view class="cu-form-group"><view class="title">设备名称</view><input placeholder="{{device_name===''?ph_device_name:device_name}}" name="input" data-event-opts="{{[['input',[['__set_model',['','device_name','$event',[]]]]]]}}" value="{{device_name}}" bindinput="__e"/></view><view class="cu-form-group"><view class="title">业主电话</view><input placeholder="{{owner_tel_str===''?ph_owner_tel_str:owner_tel_str}}" name="input" data-event-opts="{{[['input',[['__set_model',['','owner_tel_str','$event',[]]]]]]}}" value="{{owner_tel_str}}" bindinput="__e"/></view><view class="cu-form-group"><view class="title">地址</view><input placeholder="{{device_address===''?ph_device_address:device_address}}" name="input" data-event-opts="{{[['input',[['__set_model',['','device_address','$event',[]]]]]]}}" value="{{device_address}}" bindinput="__e"/></view><view class="cu-form-group"><view class="title">安装位置</view><input placeholder="{{install_location===''?ph_install_location:install_location}}" name="input" data-event-opts="{{[['input',[['__set_model',['','install_location','$event',[]]]]]]}}" value="{{install_location}}" bindinput="__e"/></view><view class="cu-form-group"><view><view class="title">地图位置</view><map latitude="{{latitude}}" longitude="{{longitude}}" markers="{{covers}}"></map></view></view><view class="cu-bar bg-white margin-top solid-top"><view class="action">安装照片</view><view class="action">{{''+imgList.length+'/1'}}</view></view><view class="cu-form-group margin-bottom-sm"><view class="grid col-4 grid-square flex-sub"><block wx:for="{{imgList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="bg-img" data-url="{{imgList[index]}}" data-event-opts="{{[['tap',[['ViewImage',['$event']]]]]}}" bindtap="__e"><image src="{{imgList[index]}}" mode="aspectFill"></image><view class="cu-tag bg-red" data-index="{{index}}" data-event-opts="{{[['tap',[['DelImg',['$event']]]]]}}" catchtap="__e"><text class="cuIcon-close"></text></view></view></block><block wx:if="{{imgList.length<1}}"><view data-event-opts="{{[['tap',[['ChooseImage',['$event']]]]]}}" class="solids" bindtap="__e"><text class="cuIcon-cameraadd"></text></view></block></view></view></form></view><view class="justify-between bottom-box"><view class="padding flex flex-direction"><button data-event-opts="{{[['tap',[['onAddDevice',['$event']]]]]}}" class="cu-btn bg-dark-purple lg" bindtap="__e">添加</button></view></view></view><view class="{{['cu-modal bottom-modal',modalName=='PermissionModal'?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">位置权限申请</view><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-light-purple"></text></view></view><view class="padding-xl">需要用户授权位置权限</view><view class="cu-bar bg-white"><view class="action"><button data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="cu-btn line-green text-purple" bindtap="__e">取消</button><button class="cu-btn bg-gradual-dark-purple margin-left" type="primary" open-type="openSetting" data-event-opts="{{[['tap',[['openSetting',['$event']]]]]}}" bindtap="__e">设置</button></view></view></view></view></view>